{"version":3,"sources":["typescript.min.js"],"names":["GlobalMethods","prototype","ifValEmpty","jdomInput","i","length","eq","val","hintErrInpt","addClass","enterPressFakeClick","jqdom","jqdomTarget","on","e","keyCode","prop","trigger","getUrlParam","name","reg","RegExp","r","window","location","search","substr","match","decodeURI","glb","PublicMethods","navSlide","naviSlide","itemsOperate","$","moreIcon","slideDown","console","log","slideUp","removeClass","logout","ajax","type","url","data","info","dataType","success","result","href","error","complete","pub","ExecutePages","edit","setBtnDisable","ajaxGetContent","id","articleId","oTitle","oAuthor","oTime","split","oCoverPic","oContent","tTitle","tAuthor","tTime","tCoverPic","tContent","alert","ajaxSbmit","origTitle","origAuthor","origTime","origCoverPic","origContent","trsTitle","trsAuthor","trsTime","trsCoverPic","trsContent","this","upData","JSON","stringify","attr","setEnable","setTimeout","about","setTurnto","timer","imgClickCount","jqthis","removeAnimate","parent","clearTimeout","login","fakeClickWhenEnter","setBtnIfShow","loginAjax","account","password","blur","article","articleManage","slideUpDom","remove","articleDelete","deleteBtn","thisContainer","parents","confirm","start","exec"],"mappings":"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","file":"../scripts/typescript.min.js","sourcesContent":["/// <reference path=\"jquery.d.ts\" />\nvar GlobalMethods = (function () {\n    function GlobalMethods() {\n    }\n    GlobalMethods.prototype.ifValEmpty = function (jdomInput) {\n        for (var i = 0; i < jdomInput.length; i++) {\n            if (jdomInput.eq(i).val() === '') {\n                return true;\n            }\n        }\n        return false;\n    };\n    GlobalMethods.prototype.hintErrInpt = function (jdomInput) {\n        jdomInput.addClass('input-err-hint');\n        return jdomInput;\n    };\n    GlobalMethods.prototype.enterPressFakeClick = function (jqdom, jqdomTarget) {\n        jqdom.on('keypress', function (e) {\n            if (e.keyCode === 13 && !jqdomTarget.prop('disabled')) {\n                jqdomTarget.trigger('click');\n            }\n        });\n        return jqdom;\n    };\n    GlobalMethods.prototype.getUrlParam = function (name) {\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\n        var r = window.location.search.substr(1).match(reg);\n        return r !== null ? decodeURI(r[2]) : null;\n    };\n    return GlobalMethods;\n}());\nvar glb = new GlobalMethods();\n// global method\nvar PublicMethods = (function () {\n    function PublicMethods() {\n    }\n    PublicMethods.prototype.navSlide = function () {\n        function naviSlide() {\n            var itemsOperate = $('.nav .more-operate .more-oprate-items');\n            var moreIcon = $('.nav .more-operate .fa-ellipsis-v');\n            $('.nav .more-operate .nav-alink').on('mouseenter', function () {\n                itemsOperate.slideDown('fast');\n                console.log(moreIcon);\n                moreIcon.addClass('nav-more-rotate');\n            });\n            $('.nav .more-operate').on('mouseleave', function () {\n                itemsOperate.slideUp('fast');\n                moreIcon.removeClass('nav-more-rotate');\n            });\n        }\n        function logout(jqdom) {\n            jqdom.on('click', function () {\n                $.ajax({\n                    type: 'POST',\n                    url: '/logout',\n                    data: { info: 'logout' },\n                    dataType: 'json',\n                    success: function (result) {\n                        console.log('success logout', result);\n                        window.location.href = \"/login\";\n                    },\n                    error: function (e) {\n                        console.log('logout ajax err', e);\n                    },\n                    complete: function () {\n                        console.log('logout complete');\n                    }\n                });\n            });\n        }\n        naviSlide();\n        logout($('.nav .nav-ul .more-operate .log-out'));\n    };\n    return PublicMethods;\n}());\nvar pub = new PublicMethods();\n// public method\nvar ExecutePages = (function () {\n    function ExecutePages() {\n    }\n    ExecutePages.prototype.edit = function () {\n        var articleId = glb.getUrlParam('articleid');\n        function setBtnDisable() {\n            $('.edit-input').on('keyup mouseup touchend', function () {\n                console.log(glb.ifValEmpty($('.edit-input')));\n                if (!glb.ifValEmpty($('.edit-input'))) {\n                    $('.button-block .as-btn').prop('disabled', false);\n                }\n                else {\n                    $('.button-block .as-btn').prop('disabled', true);\n                }\n            });\n        }\n        function ajaxGetContent() {\n            $.ajax({\n                type: 'POST',\n                url: '/get-article-content',\n                data: { id: articleId },\n                dataType: 'json',\n                success: function (result) {\n                    if (result.info === 'get success') {\n                        console.log(result.result);\n                        $('.origin-title .edit-input').val(result.result.oTitle);\n                        $('.origin-author .edit-input').val(result.result.oAuthor);\n                        $('.origin-time .edit-input').val(result.result.oTime.split('T')[0]);\n                        $('.origin-cover .edit-input').val(result.result.oCoverPic);\n                        $('.origin-content .edit-input').val(result.result.oContent);\n                        $('.trans-title .edit-input').val(result.result.tTitle);\n                        $('.trans-author .edit-input').val(result.result.tAuthor);\n                        $('.trans-time .edit-input').val(result.result.tTime.split('T')[0]);\n                        $('.trans-cover .edit-input').val(result.result.tCoverPic);\n                        $('.trans-content .edit-input').val(result.result.tContent);\n                    }\n                    else {\n                        alert('发生了错误 Σ(;ﾟдﾟ)');\n                    }\n                },\n                error: function (e) {\n                    console.log('ajax err', e);\n                },\n                complete: function () {\n                    console.log('ajax complete');\n                }\n            });\n        }\n        function ajaxSbmit() {\n            var origTitle;\n            var origAuthor;\n            var origTime;\n            var origCoverPic;\n            var origContent;\n            var trsTitle;\n            var trsAuthor;\n            var trsTime;\n            var trsCoverPic;\n            var trsContent;\n            var data;\n            $('.button-block .as-btn').on('click', function () {\n                $(this).prop('disabled', true);\n                origTitle = $('.origin-title .edit-input').val();\n                origAuthor = $('.origin-author .edit-input').val();\n                origTime = $('.origin-time .edit-input').val();\n                origCoverPic = $('.origin-cover .edit-input').val();\n                origContent = $('.origin-content .edit-input').val();\n                trsTitle = $('.trans-title .edit-input').val();\n                trsAuthor = $('.trans-author .edit-input').val();\n                trsTime = $('.trans-time .edit-input').val();\n                trsCoverPic = $('.trans-cover .edit-input').val();\n                trsContent = $('.trans-content .edit-input').val();\n                data = {\n                    oTitle: origTitle,\n                    oAuthor: origAuthor,\n                    oTime: origTime,\n                    oCoverPic: origCoverPic,\n                    oContent: origContent,\n                    tTitle: trsTitle,\n                    tAuthor: trsAuthor,\n                    tTime: trsTime,\n                    tCoverPic: trsCoverPic,\n                    tContent: trsContent\n                };\n                var upData = JSON.stringify(data);\n                var articleId = $(this).attr('updatefor');\n                console.log(upData);\n                $.ajax({\n                    type: 'POST',\n                    url: '/editupload',\n                    data: { data: upData, id: articleId },\n                    dataType: 'json',\n                    success: function (result) {\n                        console.log('success', result);\n                        if (result.info === 'creat success') {\n                            alert('创建成功');\n                            window.location.href = '/article-manage';\n                        }\n                    },\n                    error: function (e) {\n                        console.log('ajax err', e);\n                        alert('创建失败 错误：' + e);\n                    },\n                    complete: function () {\n                        console.log('ajax complete');\n                        function setEnable() {\n                            $('.button-block .as-btn').prop('disabled', false);\n                        }\n                        setTimeout(setEnable, 2000);\n                    }\n                });\n            });\n        }\n        setBtnDisable();\n        ajaxSbmit();\n        pub.navSlide();\n        articleId ? ajaxGetContent() : null;\n        // public method\n    };\n    // edit page function\n    ExecutePages.prototype.about = function () {\n        pub.navSlide();\n        // public method\n        function setTurnto() {\n            var imgClickCount = 0;\n            var timer;\n            $('.about-image-container img').on('click', function () {\n                imgClickCount++;\n                console.log(imgClickCount);\n                var jqthis = $(this);\n                imgClickCount === 3 ? function () { jqthis.trigger('willChange'); imgClickCount = 0; }() : null;\n            });\n            $('.about-image-container img').on('willChange', function () {\n                console.log('trogger chage');\n                clearTimeout(timer);\n                var jqthis = $(this);\n                jqthis.parent().addClass('avartor-alter');\n                function removeAnimate() {\n                    jqthis.parent().removeClass('avartor-alter');\n                    console.log('remove ani');\n                }\n                timer = setTimeout(removeAnimate, 5100);\n            });\n        }\n        setTurnto();\n    };\n    // about page function\n    ExecutePages.prototype.login = function () {\n        pub.navSlide();\n        // public method\n        function fakeClickWhenEnter() {\n            glb.enterPressFakeClick($('body'), $('.login-btn-container .as-btn'));\n        }\n        function setBtnDisable() {\n            function setBtnIfShow() {\n                if (!glb.ifValEmpty($('.login-area label input'))) {\n                    $('.login-btn-container .as-btn').prop('disabled', false);\n                }\n                else {\n                    $('.login-btn-container .as-btn').prop('disabled', true);\n                }\n            }\n            $('.login-area label input').on('keyup mouseup touchend', function () {\n                $(this).removeClass('input-err-hint');\n                setBtnIfShow();\n            });\n            setBtnIfShow();\n        }\n        function loginAjax() {\n            var account;\n            var password;\n            var data;\n            $('.login-btn-container .as-btn').on('click', function () {\n                $('.login-area label input').blur();\n                $(this).prop('disabled', true);\n                account = $('.account-label .login-account').val();\n                password = $('.password-label .login-password').val();\n                data = {\n                    account: account,\n                    password: password\n                };\n                $.ajax({\n                    type: 'POST',\n                    url: '/login',\n                    data: data,\n                    dataType: 'json',\n                    success: function (result) {\n                        console.log('success', result);\n                        if (result.info === 'wrong account') {\n                            glb.hintErrInpt($('.login-area .input-container .account-label .login-account'));\n                        }\n                        else if (result.info === 'incorrect password') {\n                            glb.hintErrInpt($('.login-area .input-container .password-label .login-password'));\n                        }\n                        else if (result.info === 'login success') {\n                            window.location.href = '/article-manage';\n                        }\n                    },\n                    error: function (e) {\n                        console.log('login ajax err', e);\n                    },\n                    complete: function () {\n                        console.log('ajax complete');\n                        function setEnable() {\n                            $('.login-btn-container .as-btn').prop('disabled', false);\n                        }\n                        setTimeout(setEnable, 2000);\n                    }\n                });\n            });\n        }\n        setBtnDisable();\n        loginAjax();\n        fakeClickWhenEnter();\n    };\n    // login page\n    ExecutePages.prototype.article = function () {\n        pub.navSlide();\n        // public method\n    };\n    // article page\n    ExecutePages.prototype.articleManage = function () {\n        function slideUpDom(jqdom) {\n            jqdom.slideUp('fast', function () {\n                jqdom.remove();\n            });\n        }\n        function articleDelete() {\n            var deleteBtn = $('.article-content .manage-btns .btn-delete');\n            deleteBtn.on('click', function () {\n                var thisContainer = $(this).parents('.article-display');\n                var articleId = $(this).parents('.article-content').attr('article_id');\n                if (confirm('删除后不可恢复，确定删除？')) {\n                    $.ajax({\n                        type: 'POST',\n                        url: '/article-remove',\n                        data: { articleId: articleId },\n                        dataType: 'json',\n                        success: function (result) {\n                            console.log('success', result);\n                            if (result.info === 'delete error') {\n                                alert('出错啦 (⊙⊙！) ');\n                            }\n                            else if (result.info === 'delete success') {\n                                slideUpDom(thisContainer);\n                            }\n                        },\n                        error: function (e) {\n                            console.log('delete ajax err', e);\n                        },\n                        complete: function () {\n                        }\n                    });\n                }\n                else {\n                    return false;\n                }\n            });\n        }\n        articleDelete();\n        pub.navSlide();\n        // public method\n    };\n    // article manage page\n    ExecutePages.prototype.start = function () {\n        pub.navSlide();\n        // public method\n    };\n    return ExecutePages;\n}());\nvar exec = new ExecutePages();\n// event pages method\n"]}